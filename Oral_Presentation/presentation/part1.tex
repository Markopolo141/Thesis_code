





\section{the Answer}




\begin{frame} \frametitle{The GNK value - visual concept} \begin{figure} \begin{center} \includegraphics[height=6cm]{figs/pp1} \end{center} We have a set of any possible outcomes \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept} \begin{figure} \begin{center} \includegraphics[height=6cm]{figs/pp2} \end{center} Which result from actions \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept} \begin{figure} \begin{center} \includegraphics[height=6cm]{figs/pp3} \end{center} the actions of individuals \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept} \begin{figure} \begin{center} \includegraphics[height=6cm]{figs/pp4} \end{center} the actions of individuals \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept} \begin{figure} \begin{center} \includegraphics[height=6cm]{figs/pp5} \end{center} the actions of individuals \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept} \begin{figure} \begin{center} \includegraphics[height=6cm]{figs/pp6} \end{center} individuals value outcomes differently \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept} \begin{figure} \begin{center} \includegraphics[height=6cm]{figs/pp7} \end{center} individuals value outcomes differently \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept} \begin{figure} \begin{center} \includegraphics[height=6cm]{figs/pp8} \end{center} individuals value outcomes differently \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept} \begin{figure} \begin{center} \includegraphics[height=6cm]{figs/pp9} \end{center} yeilding a socially optimal outcome \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept} \begin{figure} \begin{center} \includegraphics[height=6cm]{figs/pp9} \end{center} yeilding a socially optimal outcome \\ but how much should each pay? \end{figure} \end{frame}



\begin{frame}
\frametitle{The GNK value}
We consider \textit{generalized non-cooperative game} in which:
\begin{itemize}
\item	$N=\{1,\dots,n\}$ is a finite set of players,
\item	$A\subseteq \prod_{i\in N}A^i$ is a set of all possible joint strategies, where $A^i$ denotes the set of strategies available to player $i\in N$.
\item	$\{u_i(a) : A\rightarrow \mathbb{R}\}_{i\in N}$ is a set of functions of each player's payoff/utility when joint strategy $a\in A$ is executed.
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Some Motivation}
\begin{itemize}
\item	replacement of fossil fuel generators by intermittant solar and renewable energy sources.
\item	Increased volumes of Distributed Energy Resources (DERs) for a future smart grid.
\end{itemize}
Creating problems surrounding affordability, stability, availability of power.
However there currently does not exist any agreed apon market structure for the participation of DERs in future electricity grids.\\

Demand Response? Virtual Power Plants? P2P energy trading?\\
All hinge on valuation of resources
\end{frame}

\begin{frame}
Ideally:
\begin{itemize}
\item	morally relevent - corresponding with (atleast some) peoples ideas of fairness
\item	technically flexible - able to account and handle any technicalities and range of application
\item	economic focus - prescribes reasonable, consistent and stable outcomes
\item	implementable and feasible - able to be implemented and computed
\item	elegent / simple - able to be understood and/or axiomatic, rigorous
\end{itemize}
%We explore, by developing and analysing a new solution called the \textit{Generalised Neyman \& Kohlberg Value} (or GNK value).
\end{frame}







\begin{frame} \frametitle{The GNK value - visual concept part 2} \begin{figure} \begin{center} \includegraphics[height=7cm]{figs/pa1} \end{center} We have to break it up \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept part 2} \begin{figure} \begin{center} \includegraphics[height=7cm]{figs/pa2} \end{center} Into two coalitions \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept part 2} \begin{figure} \begin{center} \includegraphics[height=7cm]{figs/pa3} \end{center} the space of outcomes between the coalitions \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept part 2} \begin{figure} \begin{center} \includegraphics[height=7cm]{figs/pa4} \end{center} ... has value to each coalition \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept part 2} \begin{figure} \begin{center} \includegraphics[height=7cm]{figs/pa5} \end{center} ... has value to each coalition \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept part 2} \begin{figure} \begin{center} \includegraphics[height=7cm]{figs/pa6} \end{center} We consider the payoff advantage one has over the other \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept part 2} \begin{figure} \begin{center} \includegraphics[height=7cm]{figs/pa7} \end{center} what is the guaranteed payoff advantage if one goes first \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept part 2} \begin{figure} \begin{center} \includegraphics[height=7cm]{figs/pa8} \end{center} what is the guaranteed payoff advantage if the other goes first \end{figure} \end{frame}
\begin{frame} \frametitle{The GNK value - visual concept part 2} \begin{figure} \begin{center} \includegraphics[height=7cm]{figs/pa9} \end{center} average these minimax payoff advantages \end{figure} \end{frame}





\begin{frame}
\frametitle{The GNK value}
Denoting $(x,y)\in A$ as a partition of a joint action between two coalitions $S$ and $N\setminus S$, 
the characteristic function for the game of threats with generalised action spaces is given by:
\begin{align}
\label{knvalue1}
v(S) = &
\frac{1}{2}\min_{\substack{y\in A^{N\setminus S} \\ \text{s.t.}\exists x,(x,y)\in A}} 
\max_{\substack{x\in A^S \\ \text{s.t.}(x,y)\in A}}
	\left(\sum_{i\in S} u_i(x,y) - \sum_{i\in N\setminus S}u_i(x,y)\right)\nonumber\\
+&
\frac{1}{2}\max_{\substack{x\in A^S \\ \text{s.t.}\exists y,(x,y)\in A}}
\min_{\substack{y\in A^{N\setminus S} \\ \text{s.t.}(x,y)\in A}}
	\left(\sum_{i\in S} u_i(x,y) - \sum_{i\in N\setminus S} u_i(x,y) \right)
\end{align}

We wish to aggregate these payoff advantages, or `threat', via axioms.
\end{frame}



\begin{frame}
\frametitle{Okay... Why threats?}

Links directly to well established game theory literature on bargaining:
\begin{itemize}
\item	John Nash \cite{nash1,nash2}
\item	John Harsanyi \cite{values3}
\item	Kalai \& Kalai \cite{kalai1,Kalai2010,shap_lectures}
\item	Neyman \& Kohlberg \cite{value2,KOHLBERG2018139}
\end{itemize}
Directly adjacent to other historic formulations
\begin{itemize}
\item	Aumann's $\alpha$ and $\beta$ core solution concepts \cite{aumann1961core}
\item	von Neuman \& Mortgenstein solution \cite{1944}
\end{itemize}

%Historic Game-Theory pioneers discussing how to superimpose the Shapley Value over non-cooperative games 
\end{frame}




\begin{frame}
\frametitle{The GNK value}
It is proven that if $\mathbb{D}$ is the set of all such games, then there exists a unique mapping $\varphi:\mathbb{D}\rightarrow\mathbb{R}^n$ that satisfies Shapley style axioms:

\begin{itemize}
\item	\textbf{Efficiency}: $\sum_i\varphi(\langle N,v\rangle)_i = v(N)\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad~~\refstepcounter{equation}(\theequation)\label{myeq}$
\item	\textbf{Symmetry}: If two players $i$ and $j$ are substitutes, such that if $v(S\cup i)=v(S\cup j)~~\forall S\subseteq N\setminus\{i,j\}$, then $\varphi(\langle N,v\rangle)_i = \varphi(\langle N,v\rangle)_j$
\item	\textbf{Null Player}: If a player $i$ is a null player (i.e.\ $v(S\cup i)=v(S)~~\forall S\subseteq N$) then $\varphi(\langle N,v\rangle)_i=0$
\item	\textbf{Additivity}: for any $v_1$ and $v_2$, $\varphi(\langle N,v_1+v_2\rangle)=\varphi(\langle N,v_1 \rangle) + \varphi(\langle N,v_2\rangle)$
\end{itemize}

Letting agent $i$'s element of $\varphi$ be denoted by $\varphi_i$, this mapping is:
\begin{equation}\label{da_value_eq} 
\varphi_i(\langle N,v\rangle)
= \frac{1}{n}\sum_{k=1}^n v_{i,k} 
= \frac{1}{n}\sum_{k=1}^n \frac{1}{\binom{n-1}{k-1}} \sum_{\substack{S:i\in S \\ |S|=k}}v(S) 
\end{equation}
\end{frame}




\begin{frame}
\frametitle{Okay... that is nice}
Why do it this way?

\begin{itemize}
\item	Considers whole strategy space
\item	model of perfect competition of divergent interests and leverage between all parties
\item	it is efficient
\item	it is budget balanced
\item	Shapley Value axiomatic
\end{itemize}
\end{frame}


%\begin{frame}
%\frametitle{The GNK value}
%For any game of threats $\langle N,v\rangle$ there is a classic cooperative game $\langle N,v'\rangle$ where the Shapley Value is the GNK value.
%It is possible to map a game of threats $v$ to a cooperative game $v'$ via relation:
%\begin{equation}\label{convert1}
%v'(S)=\frac{1}{2}v(S)+\frac{1}{2}v(N)
%\end{equation}
%
%And then we have the Shapley Value in different expressions: As the average over stratified marginal contributions:
%\begin{equation}\label{shap1_X}\varphi_i(\langle N,v\rangle) = \sum_{S\subset N, i\notin S}\frac{(n-|S|-1)!\,|S|!}{n!}(v(S\cup\{i\})-v(S))\end{equation}
%
%Or as the average contribution across all possible join orderings:
%If $\pi(N)$ is the set of permutations of the player, denote $Pre^i(O)$ as the set of predecessors of player $i$'s addition in that ordering $O\in \pi(N)$. Then the Shapley value can be expressed as:
%\begin{equation}\label{shapley_value3}
%    \varphi_i(\langle N,v\rangle) = \frac{1}{n!}\sum_{O\in\pi(N)}v(Pre^i(O)\cup\{i\})-v(Pre^i(O))
%\end{equation}
%\end{frame}



\section{Application}

\begin{frame}
\frametitle{Application to Electricity network}
We consider an electricity network under DC approximation:
\begin{itemize}
    \item A set of buses $B$
    \begin{itemize} 
        \item Power consumption at each bus $p_i$ 
        \item A bus voltage phase-angle $\theta_i$,
    \end{itemize}
    \item Lines $C\subseteq B\times B$: 
        \begin{itemize} 
        \item Line susceptance $b_{i,j}$, and 
        \item Power flow $p_{i,j}$. 
    \end{itemize}
\end{itemize}
One player per bus, and the power consumption of that bus is the player's strategy space with a linear utility.
\end{frame}

\begin{frame}
\begin{figure}[]
\includegraphics[width=0.55\linewidth,height=0.5\linewidth]{figs/GNK5.tikz}%
\resizebox*{0.35\linewidth} {!} {
    \begin {tikzpicture}
		\draw[line width=3pt] (0,0) -- (4,0);
		\draw[line width=3pt] (-2,-3) -- (2,-3);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (-1,-3) -- (-1,-4);
		\draw[line width=3pt] (1,-4) -- (5,-4);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (2,-4) -- (2,-5);
		\draw[line width=3pt] (4,-5) -- (8,-5);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (5,-5) -- (5,-6);
		\draw[line width=3pt] (2,-7) -- (6,-7);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (3,-7) -- (3,-8);

		\draw[line width=1pt] (1,0) -- (1,-1);
		\draw[line width=1pt] (1,-1) -- (0,-2);
		\draw[line width=1pt] (0,-2) -- (0,-3);

		\draw[line width=1pt] (2,0) -- (2,-1);
		\draw[line width=1pt] (2,-1) -- (3,-2);
		\draw[line width=1pt] (3,-2) -- (3,-4);

		\draw[line width=1pt] (3,0) -- (3,-1);
		\draw[line width=1pt] (3,-1) -- (6,-2);
		\draw[line width=1pt] (6,-2) -- (6,-5);
		
		
		\draw[line width=1pt] (3.5,-4) -- (3.5,-7);

		\draw[line width=1pt] (2.2,0) -- (2.2,1);
		\draw (2.2,1.5) circle (0.5);
		\draw (1.9,1.5) .. controls (1.9+0.2,1.5+0.7) and (2.5-0.2,1.5-0.7) .. (2.5,1.5);

		\node (text) at (4.1,0+0.4) {\scalebox{1.9}{1}};
		\node (text) at (2.1,-3+0.4) {\scalebox{1.9}{2}};
		\node (text) at (5.1,-4+0.4) {\scalebox{1.9}{3}};
		\node (text) at (8.1,-5+0.4) {\scalebox{1.9}{4}};
		\node (text) at (6.1,-7+0.4) {\scalebox{1.9}{5}};
    \end {tikzpicture}
}
\end{figure}
LMP transfers for Example network
\end{frame}


%\begin{frame}
%\begin{figure}[]
%\includegraphics[width=0.55\linewidth,height=0.5\linewidth]{figs/GNK8.tikz}%
%\resizebox*{0.35\linewidth} {!} {
%    \begin {tikzpicture}
%		\draw[line width=3pt] (0,0) -- (4,0);
%		\draw[line width=3pt] (-2,-3) -- (2,-3);
%		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (-1,-3) -- (-1,-4);
%		\draw[line width=3pt] (1,-4) -- (5,-4);
%		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (2,-4) -- (2,-5);
%		\draw[line width=3pt] (4,-5) -- (8,-5);
%		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (5,-5) -- (5,-6);
%		\draw[line width=3pt] (2,-7) -- (6,-7);
%		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (3,-7) -- (3,-8);
%
%		\draw[line width=1pt] (1,0) -- (1,-1);
%		\draw[line width=1pt] (1,-1) -- (0,-2);
%		\draw[line width=1pt] (0,-2) -- (0,-3);
%
%		\draw[line width=1pt] (2,0) -- (2,-1);
%		\draw[line width=1pt] (2,-1) -- (3,-2);
%		\draw[line width=1pt] (3,-2) -- (3,-4);
%
%		\draw[line width=1pt] (3,0) -- (3,-1);
%		\draw[line width=1pt] (3,-1) -- (6,-2);
%		\draw[line width=1pt] (6,-2) -- (6,-5);
%		
%		
%		\draw[line width=1pt] (3.5,-4) -- (3.5,-7);
%
%		\draw[line width=1pt] (2.2,0) -- (2.2,1);
%		\draw (2.2,1.5) circle (0.5);
%		\draw (1.9,1.5) .. controls (1.9+0.2,1.5+0.7) and (2.5-0.2,1.5-0.7) .. (2.5,1.5);
%
%		\node (text) at (4.1,0+0.4) {\scalebox{1.9}{1}};
%		\node (text) at (2.1,-3+0.4) {\scalebox{1.9}{2}};
%		\node (text) at (5.1,-4+0.4) {\scalebox{1.9}{3}};
%		\node (text) at (8.1,-5+0.4) {\scalebox{1.9}{4}};
%		\node (text) at (6.1,-7+0.4) {\scalebox{1.9}{5}};
%    \end {tikzpicture}
%}
%\end{figure}
%VCG transfers for Example network
%\end{frame}


\begin{frame}
\begin{figure}[]
\includegraphics[width=0.55\linewidth,height=0.5\linewidth]{figs/GNK4.tikz}%
\resizebox*{0.35\linewidth} {!} {
    \begin {tikzpicture}
		\draw[line width=3pt] (0,0) -- (4,0);
		\draw[line width=3pt] (-2,-3) -- (2,-3);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (-1,-3) -- (-1,-4);
		\draw[line width=3pt] (1,-4) -- (5,-4);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (2,-4) -- (2,-5);
		\draw[line width=3pt] (4,-5) -- (8,-5);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (5,-5) -- (5,-6);
		\draw[line width=3pt] (2,-7) -- (6,-7);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (3,-7) -- (3,-8);

		\draw[line width=1pt] (1,0) -- (1,-1);
		\draw[line width=1pt] (1,-1) -- (0,-2);
		\draw[line width=1pt] (0,-2) -- (0,-3);

		\draw[line width=1pt] (2,0) -- (2,-1);
		\draw[line width=1pt] (2,-1) -- (3,-2);
		\draw[line width=1pt] (3,-2) -- (3,-4);

		\draw[line width=1pt] (3,0) -- (3,-1);
		\draw[line width=1pt] (3,-1) -- (6,-2);
		\draw[line width=1pt] (6,-2) -- (6,-5);
		
		
		\draw[line width=1pt] (3.5,-4) -- (3.5,-7);

		\draw[line width=1pt] (2.2,0) -- (2.2,1);
		\draw (2.2,1.5) circle (0.5);
		\draw (1.9,1.5) .. controls (1.9+0.2,1.5+0.7) and (2.5-0.2,1.5-0.7) .. (2.5,1.5);

		\node (text) at (4.1,0+0.4) {\scalebox{1.9}{1}};
		\node (text) at (2.1,-3+0.4) {\scalebox{1.9}{2}};
		\node (text) at (5.1,-4+0.4) {\scalebox{1.9}{3}};
		\node (text) at (8.1,-5+0.4) {\scalebox{1.9}{4}};
		\node (text) at (6.1,-7+0.4) {\scalebox{1.9}{5}};
    \end {tikzpicture}
}
\end{figure}
GNK transfers for example network
\end{frame}

\begin{frame}
\frametitle{Qualities of GNK}
\begin{itemize}
\item	The GNK value is continuous in the parameters of the network
\item	The GNK payments are always budget balanced
\item	The GNK value can offset those that do not receive or generate power
\end{itemize}
\end{frame}

\section{Extending to larger networks}

\begin{frame}
\frametitle{Scaling to larger Networks}
Approaches:
\begin{itemize}
\item	Sampling techniques
\item	Simplifying Proxy for minimax optimisations
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Sampling}
To sample the GNK value either (A) directly or (B) by converting it to Shapley Value.
if (B) is sampling is conducted in a join ordering, and using stratification?

\begin{itemize}
\item	\textsc{Simple}: Sampling GNK directly, using stratification
\item	\textsc{Appro}: Sampling Shapley Value without stratification. \cite{DBLP:journals/cor/CastroGT09}
\item	\textsc{Join}: Sampling Shapley Value using stratification and join orders. \cite{CASTRO2017180}
\item	\textsc{Neyman}: Sampling Shapley Value using stratification, not using join orders, using sample variance of the strata \cite{CASTRO2017180,1938.10503378}
\item	\textsc{Hoeffding}: Sampling Shapley Value using stratification, not using join orders, using Hoeffding type inequality \cite{2013arXiv1306.4265M}
\item	\textsc{SEBM}: Sampling Shapley Value using stratification, not using join orders, using custom inequality
\end{itemize}
\end{frame}

\begin{frame}
\input{figs/absolute_error1.tex}
\end{frame}

\begin{frame}
\input{figs/approximating_times1.tex}
\end{frame}


\begin{frame}
\frametitle{modified GNK}
\begin{align*}
\label{knvalue22}
v(S) = &+ \frac{1}{2}\left(\sum_{i\in S} u_i(p_i) - \sum_{i\in N\setminus S}u_i(p_i)\right)\nonumber\\
&\quad\quad\quad\quad\quad~\text{s.t}~ \left[\{p_i\}_{i\in N}=\argmax \left(\sum_{i\in S} u_i(p_i) + \sum_{i\in N\setminus S}\epsilon u_i(p_i)\right)\right]\nonumber\\
&- \frac{1}{2}\left(\sum_{i\in N\setminus S}u_i(p_i) - \sum_{i\in S} u_i(p_i)\right)\nonumber\\
&\quad\quad\quad\quad\quad~\text{s.t}~ \left[\{p_i\}_{i\in N}=\argmax \left(\sum_{i\in N\setminus S}u_i(p_i) + \sum_{i\in S} \epsilon u_i(p_i) \right)\right]
\end{align*}
Where $\epsilon$ is a small positive value.
Is the expected payoff advantage where the leader chooses the powerflows that prioritise their own utility and then the follower's utility secondarily.
\end{frame}


\begin{frame}
\input{figs/accuracy_graph1.tex}
\end{frame}


\begin{frame}
\input{figs/experiment_table13.tex}
\end{frame}
%\begin{frame}
%\input{figs/experiment_table11.tex}
%\end{frame}
\begin{frame}
\input{figs/experiment_table12.tex}
\end{frame}
\begin{frame}
\input{figs/experiment_table14.tex}
\end{frame}


\begin{frame}
\frametitle{where does the negative utility come from}
Experimentaiton indicates negative allocation stems from payoff difference and power conservation constraint.
\begin{align}
v(S) = &
\frac{1}{2}\min_{\substack{y\in A^{N\setminus S} \\ \text{s.t.}\exists x,(x,y)\in A}} 
\max_{\substack{x\in A^S \\ \text{s.t.}(x,y)\in A}}
	\left(\sum_{i\in S} u_i(x,y) - \sum_{i\in N\setminus S}u_i(x,y)\right)\nonumber\\
+&
\frac{1}{2}\max_{\substack{x\in A^S \\ \text{s.t.}\exists y,(x,y)\in A}}
\min_{\substack{y\in A^{N\setminus S} \\ \text{s.t.}(x,y)\in A}}
	\left(\sum_{i\in S} u_i(x,y) - \sum_{i\in N\setminus S} u_i(x,y) \right)
\end{align}
\end{frame}



\begin{frame}
\frametitle{Conclusion \& future work}
The GNK value was developed and evaluated as a novel method of valuing electricity, unfortunately failed invidual rationality on large scale.
\begin{itemize}
\item	further approximations such as player clustering (such as implemented by \cite{DBLP:journals/corr/abs-1903-10965}), or transforming the problem into a non-atomic form, similar to non-atomic Shapley Value.
\item	solution concepts like GNK that are incentive compatible (such as presented by \cite{myerson1,Salamanca2019}) in the context of electricity networks.
\item	It may be possible to construct a weighted GNK value to account for differential likelihoods of different coalitions forming.
\item	The GNK value allocates the utilitarian outcome, however it is not necessarily required that utility be measured in money (even though this is the easiest interpretation).
It is also possible to note that there exist non-transferable-utility (NTU) modifications - such as also considered by \cite{value1} - which could be modified to yield a NTU GNK value.
\item	exploration of other ideas that make the GNK individually rational
\end{itemize}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Arsclassica Article
% LaTeX Template
% Version 1.1 (1/8/17)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% Lorenzo Pantieri (http://www.lorenzopantieri.net) with extensive modifications by:
% Vel (vel@latextemplates.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[
10pt, % Main document font size
a4paper, % Paper type, use 'letterpaper' for US Letter paper
oneside, % One page layout (no page indentation)
%twoside, % Two page layout (page indentation for binding and different headers)
headinclude,footinclude, % Extra spacing for the header and footer
BCOR5mm, % Binding correction
]{scrartcl}

\input{structure.tex} % Include the structure.tex file which specified the document structure and layout

\usepackage{tikz}
\usepackage{tikzscale}
\usepackage{pgfplots}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{amsmath}
\usetikzlibrary{snakes,arrows,shapes}
\usetikzlibrary{arrows.meta}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

\pgfplotsset{
    colormap={blackwhite}{[5pt]
        rgb255(0pt)=(255, 0, 0);
        rgb255(90pt)=(255, 0, 0);
        rgb255(100pt)=(0, 0, 100);
        rgb255(300pt)=(0, 80, 130);
        rgb255(500pt)=(0, 200, 130);
        rgb255(1000pt)=(255, 255, 100)
    },
}



\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{csquotes}
\usepackage{cleveref}

\usepackage{accents}
\usepackage{units}
\usepackage{mathtools}
\usepackage{array}
\usepackage{hyperref}
%\usepackage{floatrow}
%\usepackage[x11names, svgnames, rgb]{xcolor}

\usepackage{tikz}
\usepackage{tikzscale}
\usepackage{stmaryrd}
\usepackage{pgfplots}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{algorithm}
\usepackage{algorithmic}

\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}

\DeclareMathOperator{\E}{\mathbb{E}}
\DeclareMathOperator{\p}{\mathbb{P}}
\DeclareMathOperator{\pr}{\mathbb{P}}
\newlength{\dhatheight}
\newcommand{\doublehat}[1]{%
    \settoheight{\dhatheight}{\ensuremath{\hat{#1}}}%
    \addtolength{\dhatheight}{-0.15ex}%
    \hat{\vphantom{\rule{1pt}{\dhatheight}}%
    \smash{\hat{#1}}}}

\newtheorem{example_game}{Example Game}

%----------------------------------------------------------------------------------------
%	TITLE AND AUTHOR(S)
%----------------------------------------------------------------------------------------

\title{\normalfont\spacedallcaps{Oral Presentation Summary}} % The article title

\subtitle{In requirement for PhD program} % Uncomment to display a subtitle

\author{\spacedlowsmallcaps{Mark Burgess}} % The article author(s) - author affiliations need to be specified in the AUTHOR AFFILIATIONS block

%\date{} % An optional date to appear under the author(s)

%----------------------------------------------------------------------------------------

\begin{document}

%----------------------------------------------------------------------------------------
%	HEADERS
%----------------------------------------------------------------------------------------

\renewcommand{\sectionmark}[1]{\markright{\spacedlowsmallcaps{#1}}} % The header for all pages (oneside) or for even pages (twoside)
%\renewcommand{\subsectionmark}[1]{\markright{\thesubsection~#1}} % Uncomment when using the twoside option - this modifies the header on odd pages
\lehead{\mbox{\llap{\small\thepage\kern1em\color{halfgray} \vline}\color{halfgray}\hspace{0.5em}\rightmark\hfil}} % The header style

\pagestyle{scrheadings} % Enable the headers specified in this block

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS & LISTS OF FIGURES AND TABLES
%----------------------------------------------------------------------------------------

\maketitle % Print the title/author/date block

\setcounter{tocdepth}{2} % Set the depth of the table of contents to show sections and subsections only

\tableofcontents % Print the table of contents

%\listoffigures % Print the list of figures

%\listoftables % Print the list of tables


%----------------------------------------------------------------------------------------
%	AUTHOR AFFILIATIONS
%----------------------------------------------------------------------------------------

\let\thefootnote\relax\footnotetext{\textit{Australian National University, College of Engineering and Computer Science (mark.burgess@anu.edu.au)}}

%----------------------------------------------------------------------------------------

%\newpage % Start the article content on the second page, remove this if you have a longer abstract that goes onto the second page

%----------------------------------------------------------------------------------------
%	INTRODUCTION
%----------------------------------------------------------------------------------------

\section{Introduction}

The Australian electricity system is currently being subjective to technological change, particularly the replacement of fossil fuel generators by solar and renewable energy sources, and the intermittancy of renewable generation technology is driving the need for investigation and implementation of energy storage technologies.
Particularly there is much investigation into the potential of renewable energy resources on distribution networks - or Distributed Energy Resources (DERs) - as a solution of future energy grids.
However there currently does not exist any agreed apon market structure for the participation of DERs in future electricity grids.

The investigation of possible market structures ultimately reduces to a fundamental question "How should electrical energy be traded?", which is identified as having a moral character.
The question of how resources such as money and electricity \textit{should} be distributed between parties is investigated in a branch of philosophy called \textit{Distributive Justice}.
But unfortunately most of these vague moral elements conflict amongst themself and do not nessisarily lead to definitive and defined solutions.

How should electrical resources and monetary transactions occur in the space of a complex electrical system.

We develop a new solution called the \textit{Generalised Neyman \& Kohlberg Value} (or GNK value) and approximate it using sampling theory in the context of larger electricity networks and compare it against
\begin{enumerate}[noitemsep]
\item Locational Marginal Pricing (LMP)
\item Vickrey Clark Groves (VCG) mechanism.
\end{enumerate}

Our solution extends:
\begin{enumerate}
\item Shapley Value (SV)
\item Bargaining Solution Concepts
\end{enumerate}



\section{The GNK value}
We define the characteristic function $v(S)$, in the context of a \textit{generalized non-cooperative game} which is a game where the strategies available to one player may be restricted by the strategy choice of others.
A generalised non-cooperative game consists of a triplet $G = \langle N,A,u \rangle$ in which:
\begin{itemize}
\item	$N=\{1,\dots,n\}$ is a finite set of players,
\item	$A\subseteq \prod_{i\in N}A^i$ is a set of all possible joint strategies, where $A^i$ denotes the set of strategies available to player $i\in N$, and $A$ is a subset of their product space
\item	$\{u_i(a) : A\rightarrow \mathbb{R}\}_{i\in N}$ is a set of functions of each player's payoff/utility when joint strategy $a\in A$ is executed.
\end{itemize}

In this context, we wish to describe the payoff `threat' or `advantage' $v(S)$ of a coalition $S\subseteq N$ (letting $A^S=\prod_{i\in S}A^i$), taking into account the constraints that apply to the joint action space.
Denoting $(x,y)\in A$ as a partition of a joint action between two coalitions $S$ and $N\setminus S$, 
the characteristic function for the game of threats with generalised action spaces is given by:
\begin{align}
\label{knvalue1}
v(S) = &
\frac{1}{2}\min_{\substack{y\in A^{N\setminus S} \\ \text{s.t.}\exists x,(x,y)\in A}} 
\max_{\substack{x\in A^S \\ \text{s.t.}(x,y)\in A}}
	\left(\sum_{i\in S} u_i(x,y) - \sum_{i\in N\setminus S}u_i(x,y)\right)\nonumber\\
+&
\frac{1}{2}\max_{\substack{x\in A^S \\ \text{s.t.}\exists y,(x,y)\in A}}
\min_{\substack{y\in A^{N\setminus S} \\ \text{s.t.}(x,y)\in A}}
	\left(\sum_{i\in S} u_i(x,y) - \sum_{i\in N\setminus S} u_i(x,y) \right)
\end{align}

We wish to aggregate these payoff advantages, or `threat', via axioms.

for any characteristic function $v$ where $v(S)=-v(N\setminus S) \label{myeq2} \quad \forall S\subseteq N$
The intuition is the characteristic function of this game is an measure of the strength of the bargaining position (the `threat' or `advantage') that a coalition, $S$, has over its complement, $N\setminus S$.

It is proven that if $\mathbb{D}$ is the set of all such games, then there exists a unique mapping $\varphi:\mathbb{D}\rightarrow\mathbb{R}^n$ that satisfies Shapley style axioms:

\begin{itemize}
\item	\textbf{Efficiency}: $\sum_i\varphi(\langle N,v\rangle)_i = v(N)\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad~~\refstepcounter{equation}(\theequation)\label{myeq}$
\item	\textbf{Symmetry}: If two players $i$ and $j$ are substitutes, such that if $v(S\cup i)=v(S\cup j)~~\forall S\subseteq N\setminus\{i,j\}$, then $\varphi(\langle N,v\rangle)_i = \varphi(\langle N,v\rangle)_j$
\item	\textbf{Null Player}: If a player $i$ is a null player (i.e.\ $v(S\cup i)=v(S)~~\forall S\subseteq N$) then $\varphi(\langle N,v\rangle)_i=0$
\item	\textbf{Additivity}: for any $v_1$ and $v_2$, $\varphi(\langle N,v_1+v_2\rangle)=\varphi(\langle N,v_1 \rangle) + \varphi(\langle N,v_2\rangle)$
\end{itemize}

Letting agent $i$'s element of $\varphi$ be denoted by $\varphi_i$, this mapping is:
\begin{equation}\label{da_value_eq} 
\varphi_i(\langle N,v\rangle)
= \frac{1}{n}\sum_{k=1}^n v_{i,k} 
= \frac{1}{n}\sum_{k=1}^n \frac{1}{\binom{n-1}{k-1}} \sum_{\substack{S:i\in S \\ |S|=k}}v(S) 
\end{equation}
Where $v_{i,k}$ is the average value of $v(S)$ for all coalitions of size $k$ that include $i$.
This is a novel extension of existing work to the space of generalised games.

Indeed \cite{KOHLBERG2018139} have shown that for any game of threats $\langle N,v\rangle$ there is a classic cooperative game $\langle N,v'\rangle$ where the two Shapley values are the same.
It is possible to map a game of threats $v$ to a cooperative game $v'$ via relation:
\begin{equation}\label{convert1}
v'(S)=\frac{1}{2}v(S)+\frac{1}{2}v(N)
\end{equation}




\section{Application to Electricity Networks}


We begin by setting out the elements of an electricity network under DC approximation:
\begin{itemize}
    \item A set of buses $B$ with, for all $i\in B$:
    \begin{itemize} 
        \item Power consumption at each bus $p_i$, and 
        \item A bus voltage phase-angle $\theta_i$,
    \end{itemize}
    \item Lines $C\subseteq B\times B$, with, for all $(i,j)\in C$: 
        \begin{itemize} 
        \item Line susceptance $b_{i,j}$, and 
        \item Power flow $p_{i,j}$ (power from bus $i$ to $j$), with $p_{i,j}=-p_{j,i}$. 
    \end{itemize}
\end{itemize}
In this context, the DC approximated powerflow constraints (per \cite{Wang1}) are expressed as follows:
\begin{equation}
\label{dcopf1}
\begin{aligned}
\text{DC-powerflow} \quad& \\
\text{Variables:} \quad&  p_{i\in B},\ \theta_{i\in B},\ p_{(i,j)\in C} \\
\text{constraints:} \quad& p_i^{l}\le p_i \le p_i^{u} \\
&p_{i,j}^l \le p_{i,j} \le p_{i,j}^u \\
&p_j = \sum_{(i,j)\in C}p_{i,j}\\
&p_{i,j} = -b_{i,j}(\theta_i - \theta_j)
\end{aligned}
\end{equation}
where $p_i^{l}$, $p_i^{u}$, $p_{i,j}^l$, $p_{i,j}^u$ are the upper and lower bounds on power consumption/generation and line limits, respectively.

In this DC powerflow network the participants on each bus are treated as players in a game.
For simplicity, we have one player per bus (i.e.~$N=B$), and the power consumption of that bus is the respective player's strategy space (i.e.\ $A_i=[p_i^l,p_i^u]$).
Then the DC constraints define the space of jointly executable strategies --- forming the generalised strategy space $A$.

We further assume that there is a linear utility (or payoff) associated with the power consumption of each player, denoted $u_i(p_i)$ for player $i$, which is all the components of a generalised game.





\begin{figure}[]
\subfloat[bog][Transfers under LMP.]{\includegraphics[width=0.5\linewidth,height=0.5\linewidth]{figs/GNK5.tikz}}%
\subfloat[bog][Transfers under VCG.]{\includegraphics[width=0.5\linewidth,height=0.5\linewidth]{figs/GNK8.tikz}}\\
\subfloat[bog][Transfers under the GNK value, $\varphi_i(\langle N,v \rangle)-u_i(p_i)$]{\includegraphics[width=0.5\linewidth,height=0.5\linewidth]{figs/GNK4.tikz}}%
\subfloat[bog][Line-Node diagram of example network]{\resizebox*{0.5\linewidth} {!} {
    \begin {tikzpicture}
		\draw[line width=3pt] (0,0) -- (4,0);
		\draw[line width=3pt] (-2,-3) -- (2,-3);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (-1,-3) -- (-1,-4);
		\draw[line width=3pt] (1,-4) -- (5,-4);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (2,-4) -- (2,-5);
		\draw[line width=3pt] (4,-5) -- (8,-5);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (5,-5) -- (5,-6);
		\draw[line width=3pt] (2,-7) -- (6,-7);
		\draw[-{Latex[length=5mm, width=4mm]},line width=3pt] (3,-7) -- (3,-8);

		\draw[line width=1pt] (1,0) -- (1,-1);
		\draw[line width=1pt] (1,-1) -- (0,-2);
		\draw[line width=1pt] (0,-2) -- (0,-3);

		\draw[line width=1pt] (2,0) -- (2,-1);
		\draw[line width=1pt] (2,-1) -- (3,-2);
		\draw[line width=1pt] (3,-2) -- (3,-4);

		\draw[line width=1pt] (3,0) -- (3,-1);
		\draw[line width=1pt] (3,-1) -- (6,-2);
		\draw[line width=1pt] (6,-2) -- (6,-5);
		
		
		\draw[line width=1pt] (3.5,-4) -- (3.5,-7);

		\draw[line width=1pt] (2.2,0) -- (2.2,1);
		\draw (2.2,1.5) circle (0.5);
		\draw (1.9,1.5) .. controls (1.9+0.2,1.5+0.7) and (2.5-0.2,1.5-0.7) .. (2.5,1.5);

		\node (text) at (4.1,0+0.4) {\scalebox{1.9}{1}};
		\node (text) at (2.1,-3+0.4) {\scalebox{1.9}{2}};
		\node (text) at (5.1,-4+0.4) {\scalebox{1.9}{3}};
		\node (text) at (8.1,-5+0.4) {\scalebox{1.9}{4}};
		\node (text) at (6.1,-7+0.4) {\scalebox{1.9}{5}};
    \end {tikzpicture}
}}

\caption[Power-levels and utility imputations under LMP, VCG and GNK for example network]{The transfers under LMP, VCG, GNK for the example network.\\ All x-axes are the system generation capacity, $-p_1^l$}\label{fig:11}
\end{figure}

Some things of note:

\begin{itemize}
\item	The GNK value and VCG imputations are continuous in the parameters of the network
\item	The GNK payments are always budget balanced
\item	The GNK value (but not VCG or LMP) can offset those that do not receive or generate power
\item	The GNK value is not incentive compatible
\item	The GNK value is computationally difficult
\end{itemize}

\section{Scaling to larger Networks}

Approaches
\begin{itemize}
\item	Sampling techniques
\item	Simplifying Proxy for minimax optimisations
\end{itemize}

\subsection{Sampling Approches}
It is possible to convert the GNK value into the form of a classic Shapley Value, and then employ a range of existing techniques to sample the shapley value to specific accuracy.
Alternatively it is possible to sample the GNK value directly.
If The GNK value is converted to shapley value form, then there is an additional question whether the sampling is conducted in a join ordering, and additionally whether stratification is used.
particularly stratification is used whether equation \ref{shapley_value1} is used over or \ref{shapley_value3} more directly.

Particularly we consider the effectiveness of sampling using the following methods:

\begin{itemize}
\item	\textsc{Simple}: For sampling the GNK value directly per equation \ref{da_value_eq}, stratification approximating each $v_{i,k}$ 
\item	\textsc{Appro}: For sampling the Shapley Value directly without stratification by sampling equation \ref{shapley_value3}. \cite{DBLP:journals/cor/CastroGT09}
\item	\textsc{Join}: For sampling the Shapley Value using stratification equation \ref{shapley_value1} using join orders. \cite{CASTRO2017180}
\item	\textsc{Neyman}: For sampling the Shapley Value using stratification equation \ref{shapley_value1}, not using join orders, in proportion to the sample variance of the strata, expending half the budget attaining variances before sampling in proportion to them. \cite{CASTRO2017180,1938.10503378}
\item	\textsc{Hoeffding}: For sampling the Shapley Value using stratification equation \ref{shapley_value1}, not using join orders, in proportion to a Hoeffding type inequality on the error of the strata estimates \cite{2013arXiv1306.4265M}
\item	\textsc{SEBM}: For sampling the Shapley Value using stratification, not using join orders, in association with a complicated concentration inequality developed by us.
\end{itemize}

\input{figs/absolute_error1.tex}

The GNK is doubly exponentially complex to compute even using sampling

\input{figs/approximating_times1.tex}

\subsection{Sampling a modified GNK value at scale}\label{sec:modified_gnk}

Given the intractable nature of the GNK value for large networks, we considered a proxy inplace of the minimax optimisations of the characteristic function that define the GNK value (equation \ref{knvalue1}).
Particularly we considered a relaxation:

\begin{align}
\label{knvalue22}
v(S) = &+ \frac{1}{2}\left(\sum_{i\in S} u_i(p_i) - \sum_{i\in N\setminus S}u_i(p_i)\right)\nonumber\\
&\quad\quad\quad\quad\quad~\text{s.t}~ \left[\{p_i\}_{i\in N}=\argmax \left(\sum_{i\in S} u_i(p_i) + \sum_{i\in N\setminus S}\epsilon u_i(p_i)\right)\right]\nonumber\\
&- \frac{1}{2}\left(\sum_{i\in N\setminus S}u_i(p_i) - \sum_{i\in S} u_i(p_i)\right)\nonumber\\
&\quad\quad\quad\quad\quad~\text{s.t}~ \left[\{p_i\}_{i\in N}=\argmax \left(\sum_{i\in N\setminus S}u_i(p_i) + \sum_{i\in S} \epsilon u_i(p_i) \right)\right]
\end{align}

Where $\epsilon$ is a small positive value, and where we assume all the DC power constraints apply in both $\argmax$.

Rather than equation \eqref{knvalue1}, this equation \eqref{knvalue22} encapsulates the expected payoff advantage of the coalition under a 50:50 coinflip of who goes first, where in each case the leader chooses the powerflows that strictly prioritise their own utility and then the follower's utility is maximised secondarily, we call this proxy GNK value the `M-GNK value'.\footnote{This dynamic is evident for sufficiently small $\epsilon$ in the formula, but the same dynamic could also be achieved by a two stage optimisation process.}
This expression encodes much of the same dynamic as the original expression (equation \ref{knvalue1}) but avoids much of the adversarial strategic counter-considerations that make the original expression NP-hard, as the leader is unwilling to sacrifice their utility to harm the follower's utility and vice versa.

\input{figs/accuracy_graph1.tex}

\input{figs/experiment_table1.tex}

\section{Discussion}

\begin{itemize}
\item	LMP and VCG are nearly identical (figures \ref{fig:experiment_table_11} and \ref{fig:experiment_table_12}) while GNK is distinctly different. An explanation is that both LMP and VCG implement the same electrical outcome, and allocate payments in proportional to marginal differences about the socially optimal point. Noted in a more general settings where there are many small participants \cite{NATH2019673, 8430852}
\item	In LMP and VCG there are no negative utility imputations, but that positive utility is allocated to those generators who are able to provide power the cheapest, and those consumers who value power the greatest (high x-value \& low y-value, and low x-value \& high y-value respectively).
This is because the LMP creates prices for power such that the cheapest generators are scheduled to create power which is consumed by the most desiring consumers up until a marginal point where any further dispatch/consumption would be unmotivated.
And because VCG schemes allocate non-negative utilities by their axiomatic construction (per axiom of individual rationality).
\item	A completely different result for the M-GNK value, which imputes utility to those consumers who do not receive power, and allocates negative net utility to all but the cheapest generators, even those who generate power at the socially optimal point, and this dynamic is not particularly easy to explain. The generators get allocated negative utility is that they are targets of being forced to generate at their own deficit since power-conservation constraints must be obeyed, and this dynamic becomes a negotiating lever, in the selection of threat points.

\end{itemize}

This behaviour in the context of large networks was somewhat unexpected;

One primary question is how much the behaviour exhibited in figure \ref{fig:experiment_table_13} is entirely the result of us using a modified characteristic function, per the M-GNK value (equation \ref{knvalue22}), over the more original characteristic function of the GNK value (equation \ref{knvalue1}).
The error of using this modification across randomly generated networks was calculated and shown in Figure \ref{fig:performance_graph5}.
This graph shows the cumulative probability of the difference in payments between the GNK and M-GNK - and shows for instance, that 60\% of participants could expect to receive within 10\% what they would have between GNK and M-GNK values, and that this similarity increases for larger network sizes.

\input{figs/probability_comparrison1.tex}


\begin{itemize}
\item	It is easy to realise that the GNK value is axiomatically efficient, specifically in terms of maximising the sum of utility, by axiom (equation \ref{myeq}); and as it is efficient in this regard it is also therefore Pareto optimal.
The way this efficiency is implemented is that the GNK designates the electrical outcome which maximises the sum of utility, and issues budget-balanced utility transfers between the players.
Neither LMP or VCG has a similar efficiency claim, as both allocate payments between network participants are not necessarily budget balanced.
\item	All the techniques considered (GNK, VCG and LMP, etc.) satisfy formal-equality, as they only treat different participants differently in relation to specific morally relevant characteristics --- particularly their utility preferences, and how their presence and actions can affect the utility of others.
In the electricity context, this involves the utility of electricity and capacity to deliver/generate electricity at their location in relation to the utility of that electricity for others.
However, whether-or-not these qualify as morally warranted bases for differential treatment is the subject of a wider discussion, particularly as differential treatment gives rise to differential incentives.
\item	Secondly, the minimax of the zero-sum game identifies a point of maximum strategising to gain payoff advantage specifically over the opponent, irrespective of the absolute payoff to the player.
And in this way minimax of the zero-sum game identifies a point of maximally engaged competition between the players. - and can account for altruism between players
\item	The GNK value contrasts against other similar solutions over non-cooperative games (as briefly mentioned in section \ref{relating_to_the_old}) such von Neumann and Morgenstern's solution (per equation \ref{knvalue3}), where the characteristic function is identified as minimax payoff, not minimax payoff advantage.
\end{itemize}




In the development of this research it was hoped that the GNK value would ultimately be witnessed to have a similar individual rationality property as VCG.
Particularly that no participant should be allocated less than zero utility, which might be interpreted as being what they would get if they did not participate in the mechanism.
The ethical importance of individual rationality cannot easily be overstated, particularly as a primary notion of ethical exchange is the concept of `euvoluntary' exchange (see section \ref{sec:reference_points}) which is (at least) where every party is not left worse-off for participating.

However, it is evident that GNK seems to violate this property, as it is possible for participants to be allocated with less less utility than zero.
We would expect that his particular absence of a guarantee for participants would be a major hindrance to GNK's application in electricity systems; hence an ethical failing.
However in our GNK application to electricity networks, the enforcement of the power conservation constraints (per equation \ref{dcopf1}) seems to have disallowed this eventuality.

In these cases, it might be possible to give participants actions to guarantee themself a disagreement point which affords them a zero utility, and hence restore individual rationality to the resultant GNK value; however these investigations are a topic for future research.
 if it was possible for players to unilaterally implement an outcome which guaranteed them a utility of zero, then they would be guaranteed a non-negative net utility.


\section{Conclusion}

At a broader level of consideration, it is interesting how perfect competition may or may not coincide with what is equal and ethical.
The question of when and where these coincide, and particularly if they might coincide in the context of electricity networks, was part of the motivation of this research.
Unfortunately our investigations demonstrated that the most direct application of the GNK value would be expected to fail wider social equality considerations.

\section{future work}

\begin{itemize}
\item	further approximations such as player clustering (such as implemented by \cite{DBLP:journals/corr/abs-1903-10965}), or transforming the problem into a non-atomic form, similar to non-atomic Shapley Value.
\item	solution concepts like GNK that are incentive compatible (such as presented by \cite{myerson1,Salamanca2019}) in the context of electricity networks.
\item	It may be possible to construct a weighted GNK value to account for differential likelihoods of different coalitions forming.
\item	The GNK value allocates the utilitarian outcome, however it is not necessarily required that utility be measured in money (even though this is the easiest interpretation).
It is also possible to note that there exist non-transferable-utility (NTU) modifications - such as also considered by \cite{value1} - which could be modified to yield a NTU GNK value.
\end{itemize}



\section{New Concentration Inequalities for Sampling}

\begin{theorem}[Chebyshev's inequality]\label{thm:chebyshevs}
for any random variable --- in this case $\hat{\mu}$ is a random variable --- with variance $\text{Var}(\hat{\mu})$ then the error of $\hat{\mu}$ from its mean is probability bounded:
$$ \p\left(|\hat{\mu}-\mu|\ge k\sqrt{\text{Var}(\hat{\mu})}\right)\le\frac{1}{k^2} $$
\end{theorem}

\begin{theorem}[Hoeffding's inequality]\label{Hoeffdings_inequality_proper}
Let $X$ be a real-valued random variable that is bounded $a\le X\le b$.  Then for $D=b-a$ and any $t>0$, the mean $\hat{\mu}$ of $n$ independent samples of $X$ is probability bounded by:
\begin{equation}\label{eq_no2}\p(\hat{\mu}-\mu\ge t)\le \exp\left(\frac{-2nt^2}{D^2}\right)
\end{equation}
Alternatively by rearranging:
\begin{equation}\label{eq_no2}\p\left(\hat{\mu}-\mu\ge \sqrt{\frac{D^2\log(1/t)}{2n}}\right)\le t
\end{equation}
\end{theorem}


\begin{theorem}[\cite{Maurer50empiricalbernstein}]\label{MandPsEBB}
Let $X$ be a real-valued random variable that is bounded $a\le X\le b$, with $D=b-a$.  Then for $x_1,x_2,\dots,x_n$ independent samples of $X$ the mean $\hat{\mu}=\frac{1}{n}\sum_{i=1}^nx_i$ and sample variance $\hat{\sigma}^2=\frac{1}{n}\sum_{i=1}^n(x_i-\hat{\mu})^2 $ are probability bounded by $t$ for any $t>0$:
\begin{equation}\label{maurersbound} 
    \p\left(\mu-\hat{\mu}\ge\sqrt{\frac{2\hat{\sigma}^2\log(2/t)}{n}}+\frac{7D\log(2/t)}{3(n-1)}\right)\le t
\end{equation}
\end{theorem}

\begin{theorem}[\cite{10.1007/978-3-540-75225-7_15}]\label{AudibertsEBB}
In exactly the same context as in Theorem \ref{MandPsEBB}
\begin{equation}
    \p\left(\mu-\hat{\mu}\ge\sqrt{\frac{2\hat{\sigma}^2\log(3/t)}{2n}} + \frac{3D\log(3/t)}{2n}\right) \le t.
    \end{equation}
\end{theorem}




\begin{theorem}[Variance Decomposition]\label{variance1}
For $n$ samples $x_i$, sample mean $\hat{\mu} = \frac{1}{n}\sum_ix_i$, sample variance $\hat{\sigma}^2=\frac{1}{n-1}\sum_i(x_i-\hat{\mu})^2$, and average of sample squares $\hat{\sigma}_0^2 = \frac{1}{n}\sum_ix_i^2$, the following relationship holds:
% \begin{align*}
% \quad\hat{\sigma}^2 
% &=\frac{1}{n-1}\sum_i\left(x_i-\frac{1}{n}\sum_jx_j \right)^2 
%  =\frac{1}{n-1}\left(\sum_ix_i^2-\frac{1}{n}\sum_{i,j}x_ix_j \right) % \\
% &= \frac{n}{n-1}\left(\hat{\sigma}_0^2-\hat{\mu}^2\right)
% \end{align*}
% which rearranging gives:
\[
\hat{\sigma}_0^2=\hat{\mu}^2+\frac{n-1}{n}\hat{\sigma}^2
\]
\end{theorem}



\begin{theorem}[Bennett's inequality]\label{hoeffdings1}
Let $X$ be a real-valued random variable with a mean of zero and variance $\sigma^2$, that is bounded $a\le X\le b$. 
Then for $t>0$, the mean $\hat{\mu}$ of $n$ samples of $X$ is probability bounded by:
\begin{equation}\label{eq_no2}\p(\hat{\mu}\ge t)\le H_1^n\left(\frac{\sigma^2}{b^2},\frac{t}{b}\right),
\end{equation}
where:
\begin{equation*}
H_1^n\left(\frac{\sigma^2}{b^2},\frac{t}{b}\right) =
\left(\left(\frac{\frac{\sigma^2}{b^2}}{\frac{\sigma^2}{b^2}+\frac{t}{b}}\right)^{\frac{\sigma^2}{b^2}+\frac{t}{b}}
\left(1-\frac{t}{b}\right)^{\frac{t}{b}-1}\right)^{\frac{n}{\frac{\sigma^2}{b^2}+1}}
\end{equation*}
\end{theorem}

\begin{theorem}[Sample square bound]\label{sample_squares}
Let $X$ be a real-valued random variable with a mean of zero and variance $\sigma^2$, that is bounded $a\le X\le b$, if $d=\max(b,-a)$ then for $y>0$, the mean of sample squares $\hat{\sigma}_0^2=\frac{1}{n}\sum_ix_i^2$ is probability bounded:
\begin{equation}\label{equation_squares}\p(\sigma^2 - \hat{\sigma}_0^2> y) \le H_2^n\left(\frac{\sigma^2}{d^2},\frac{y}{d^2}\right),
\end{equation}
where:
\begin{align} H_2^n\left(\frac{\sigma^2}{d^2},\frac{y}{d^2}\right) = \left(
\left(\frac{1-\frac{\sigma^2}{d^2}}{1+\frac{y}{d^2}-\frac{\sigma^2}{d^2}}\right)^{1+\frac{y}{d^2}-\frac{\sigma^2}{d^2}}
\left(\frac{\frac{\sigma^2}{d^2}}{\frac{\sigma^2}{d^2}-\frac{y}{d^2}}\right)^{\frac{\sigma^2}{d^2}-\frac{y}{d^2}}
\right)^n
\end{align}
\end{theorem}



\begin{theorem}[Martingale Bound]\label{martingale0}
For finite data $x_1,x_2,\dots x_n$ that is bounded $a\le x_i\le b$, and has a mean of zero and variance $\sigma^2=\frac{1}{n}\sum_{i=1}^nx_i^2$, denote $X_1,X_2,\dots,X_n$ the random variables corresponding to the data sequentially drawn randomly without replacement, and $\chi_m$ the average of the first $m$ of them.
If for any random variable $Z$ with a mean of zero such that $a\le Z\le b$ and $D=b-a$, with variance $\sigma_Z^2$ that there exists an $\alpha, \beta \ge 0$ such that for any $s>0$ that $\E[\exp(sZ)]\le\exp((\alpha D^2 +\beta \sigma_Z^2) s^2)$ then:
\begin{align}\E[\exp(s\chi_m)]&\le\exp\left(\alpha s^2D^2\sum_{k=m}^{n-1}\frac{1}{k^2} +\beta s^2\sigma^2 \sum_{k=m}^{n-1}\frac{n}{k^2(k+1)}\right)\\ &\le \exp((\alpha D^2\bar{\Omega}_m^n +\beta\sigma^2 \bar{\Psi}_m^n)s^2)\end{align}
where $\bar{\Omega}_m^n = \sum_{k=m}^{n-1}\frac{1}{k^2}\approx \frac{(m+1)(1-m/n)}{m^2}$ and $\bar{\Psi}_m^n = \sum_{k=m}^{n-1}\frac{n}{k^2(k+1)}\approx \frac{n+1-m}{m^2}$.
\end{theorem}




\begin{theorem}[Stratified Empirical Bernstein Bound (SEBB)]\label{thm:SEBM_bound}
Assuming the context given in Definition~\ref{def:ProblemContext}.
Then with $\Omega_{m_i}^{n_i},\Psi_{m_i}^{n_i}$ per theorem~\ref{martingale1}:
\begin{equation}\label{big_equation}
%\p\left(\frac{\left|\sum_{i=1}^n\tau_i(\chi_{i,m_i}-\mu_i)\right|}{\sqrt{\log(6/p)}}\ge \sqrt{\begin{matrix*}[l]\sum_{i=1}^n\frac{4}{17}\Omega_{m_i}^{n_i}D_i^2\tau_i^2 \\ +\begin{pmatrix*}[l]\sqrt{\log(3/p)\left(\max_i\tau_i^2{\Psi_{m_i}^{n_i}}^2D_i^2\right)} \\ +\sqrt{\begin{matrix*}[l]2\sum_{i=1}^n\tau_i^2\Psi_{m_i}^{n_i}(m_i-1)\doublehat{\sigma}_i^2/m_i \\ + \log(6n/p)\sum_i\tau_i^2D_i^2\Omega_{m_i}^{n_i}\Psi_{m_i}^{n_i} \\ +\log(3/p)\left(\max_i\tau_i^2{\Psi_{m_i}^{n_i}}^2D_i^2\right)\end{matrix*}} \end{pmatrix*}^2\end{matrix*}}\right)
%\le p 
%\end{equation}
%\begin{equation}\label{big_equation_alternate}
\pr\left(\left|\sum_{i=1}^n\tau_i(\chi_{i,m_i}-\mu_i)\right| 
\ge \sqrt{\log(6/p)\left( \alpha
+ \left(\sqrt{\beta} 
+ \sqrt{\gamma}\right)^2\right) } \right)
\le p 
\end{equation}
where:
\begin{align}
\alpha=&\sum_{i=1}^n\frac{4}{17}\Omega_{m_i}^{n_i}D_i^2\tau_i^2 \\
\beta=&\log(3/p)\left(\max_i\tau_i^2{\Psi_{m_i}^{n_i}}^2D_i^2\right) \\
\gamma=& 2\sum_{i=1}^n\tau_i^2\Psi_{m_i}^{n_i}(m_i-1)\doublehat{\sigma}_i^2/m_i
+ \log(6n/p)\sum_i\tau_i^2D_i^2\Omega_{m_i}^{n_i}\Psi_{m_i}^{n_i} \\
&\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad~+\log(3/p)\left(\max_i\tau_i^2{\Psi_{m_i}^{n_i}}^2D_i^2\right)
\end{align}
\end{theorem}


However, since the Shapley value is expressible as an average over averages by Equation~\eqref{shap2}, 
it is possible to approximate these averages via sampling techniques, and these averages are naturally stratified by coalition size.
In previously published literature, other techniques have been used to allocate samples in this context, particularly simple sampling \cite{DBLP:journals/cor/CastroGT09}, Neyman allocation \cite{CASTRO2017180,DBLP:journals/tsg/OBrienGR15}, and allocation to minimise Hoeffding's inequality \cite{2013arXiv1306.4265M}.

We assess the benefits of using our bound by comparing its performance to the approaches above in the context of some example cooperative games, with results analysed in Section~\ref{sec:discussion}.
The example games are described below:

\begin{example_game}[Airport Game]
An $n=15$ player game with characteristic function:
$$v(S)=\max_{i\in S}w_i$$
where
$w=\{w_1,\dots,w_{15}\} %\scriptstyle\scriptsize
=\{ 1, 1, 2, 2, 2, 3, 4, 5, 5, 5, 7, 8, 8, 8, 10\}$.
The maximum marginal contribution is $10$, so we assign $D_i=10$ for all $i$.
\end{example_game}

\begin{example_game}[Voting Game]
An $n=15$ player game with characteristic function:
$$v(S)=\begin{cases}
       1, &\quad\text{if}\quad \sum_{i\in S}w_i>\sum_{j\in N}w_j/2\\
       0, &\quad\text{otherwise}\\
     \end{cases}$$
where 
$w=\{w_1,\dots,w_{15}\} %\scriptstyle\scriptsize
=\{ 1, 3, 3, 6, 12, 16, 17, 19, 19, 19, 21, 22, 23, 24, 29\}$.
The maximum marginal contribution is $1$, so we assign $D_i=1$ for all $i$.
\end{example_game}

\begin{example_game}[Simple Reward Division]
An $n=15$ player game with characteristic function:
$$v(S)=\frac{1}{2}\left(\sum_{i\in S}\frac{w_i}{100}\right)^2$$
where
$w=\{w_1,\dots,w_{15}\} = \{ 45, 41, 27, 26, 25, 21, 13, 13, 12, 12, 11, 11, 10, 10, 10 \}$\\
The maximum marginal contribution is $1.19025$, so we assign $D_i=1.19025$ for all $i$.
\end{example_game}

\begin{example_game}[Complex Reward Division]
An $n=15$ player game with characteristic function:
$$v(S)=\left(\sum_{i\in S}\frac{w_i}{50}\right)^2 - \floor[\Bigg]{\sum_{i\in S}\frac{w_i}{50}}^2$$
where
$w=\{w_1,\dots,w_{15}\} = \{ 45, 41, 27, 26, 25, 21, 13, 13, 12, 12, 11, 11, 10, 10, 10 \}$\\
In this game, we assign $D_i=2$ for all $i$.
\end{example_game}

%\input{table-2.tex}

\input{figs/shapley_table.tex}


For each game, we compute the exact Shapley value, and then the average absolute errors in the approximated Shapley value for a given budget $m$ of marginal-contribution samples across multiple computational runs.
The results are shown in Table \ref{Table2}, 
where the average absolute error in the Shapley value is computed by sampling with Maleki's method \cite{2013arXiv1306.4265M} is denoted $e^{Ma}$, $e^{sim}$ is Castro's stratified simple sampling method \cite{DBLP:journals/cor/CastroGT09}, $e^{Ca}$ is Castro's Neyman sampling method \cite{CASTRO2017180}, and $e^{SEBM}$ is the error associated with our method, SEBM. 
The results in Table~\ref{Table2} show that our method performs well across the benchmarks. 



\subsection{Future Work: applications of a Multidimensional Extension}\label{sec:multi}

It was noticed that our SEBB can be extended to multidimensional data by a simple modification.
Specifically, instead of considering data that is single-valued, we consider data points that are vectors. 

Formally, for $n$ strata of finite data points which are all vectors of size $M$, let $n_i$ be the number of data points in the $i$th stratum.
Let the data in the $i$th stratum have a mean vector values $\mu_i$ (with $\mu_{i,j}$ for the $j$th component of the vector), which are value bounded within a finite width $D_{i,j}$, and have vector value variances $\sigma_{i,j}^2$.  
Given this, let $X_{i,1},X_{i,2},\dots,X_{i,n_i}$ (where $X_{i,k,j}$ is the $j$th component, of the $k$th vector from stratum $i$) be vector random variables corresponding to those data values randomly and sequentially drawn (with or without) replacement. 
Denote the average of the first $m_i$ of these random variables from the $i$th stratum by $\chi_{i,m_i}= \frac{1}{m_i}\sum_{k=1}^{m_i}X_{i,k}$ (with $\chi_{i,m_i,j}$ being the $j$th component of that vector average).
Let $\doublehat{\sigma}_{i,j}^2=\frac{i}{m_i-1}\sum_{k=1}^{m_i}(X_{i,k,j}-\chi_{i,m_i,j})^2$ be the unbiased sample variance of the first $m_i$ of these random variables in the $j$th component. 
As before, we assume weights $\tau_i$ for each stratum. \\
In this context we have the following theorem:

\begin{theorem}[Vector SEBM bound]
In the context above, then with $\Omega_{m_i}^{n_i},\Psi_{m_i}^{n_i}$ per Theorem~\ref{martingale1}:
%\begin{equation}\label{big_equation2}\p\left(\begin{matrix*}[l]\sum_{j=1}^M\left(\sum_{i=1}^n\tau_i(\chi_{i,m_i,j}-\mu_{i,j})\right)^2 \ge \\ \quad\quad \log(6/p)\sum_{j=1}^M\begin{pmatrix*}[l]\sum_{i=1}^n\frac{4}{17}\Omega_{m_i}^{n_i}D_{i,j}^2\tau_i^2 \\ +\begin{pmatrix*}[l]\sqrt{\log(3/p)\left(\max_i\tau_i^2{\Psi_{m_i}^{n_i}}^2D_{i,j}^2\right)} \\ +\sqrt{\begin{matrix*}[l]2\sum_{i=1}^n\tau_i^2\Psi_{m_i}^{n_i}(m_i-1)\doublehat{\sigma}_{i,j}^2/m_i \\ + \log(6n/p)\sum_i\tau_i^2D_{i,j}^2\Omega_{m_i}^{n_i}\Psi_{m_i}^{n_i} \\ +\log(3/p)\left(\max_i\tau_i^2{\Psi_{m_i}^{n_i}}^2D_{i,j}^2\right)\end{matrix*}} \end{pmatrix*}^2\end{pmatrix*}\end{matrix*} \right)\le Mp \end{equation}

\begin{equation}\label{big_equation2}\pr\left(\begin{matrix*}[l]\sum_{j=1}^M\left(\sum_{i=1}^n\tau_i(\chi_{i,m_i,j}-\mu_{i,j})\right)^2 \ge \\ \quad\quad \log(6/p)\sum_{j=1}^M\left(\alpha_{m_i,j}^{n_i} +\left(\sqrt{\beta_{m_i,j}^{n_i}} +\sqrt{\gamma_{m_i,j}^{n_i}}\right)^2\right)\end{matrix*} \right)\le Mp \end{equation}

where:

\begin{align}
\alpha_{j}=&\sum_{i=1}^n\frac{4}{17}\Omega_{m_i}^{n_i}D_{i,j}^2\tau_i^2 \\
\beta_{j}=&\log(3/p)\left(\max_i\tau_i^2{\Psi_{m_i}^{n_i}}^2D_{i,j}^2\right) \\
\gamma_{j}=&2\sum_{i=1}^n\tau_i^2\Psi_{m_i}^{n_i}(m_i-1)\doublehat{\sigma}_{i,j}^2/m_i
+ \log(6n/p)\sum_i\tau_i^2D_{i,j}^2\Omega_{m_i}^{n_i}\Psi_{m_i}^{n_i}  \\
&\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad~~+\log(3/p)\left(\max_i\tau_i^2{\Psi_{m_i}^{n_i}}^2D_{i,j}^2\right)
\end{align}

%$$
%\alpha_{m_i,j}^{n_i}
%=\sum_{i=1}^n\frac{4}{17}\Omega_{m_i}^{n_i}D_{i,j}^2\tau_i^2 
%$$
%$$
%\beta_{m_i,j}^{n_i}
%=\log(3/p)\left(\max_i\tau_i^2{\Psi_{m_i}^{n_i}}^2D_{i,j}^2\right) 
%$$
%and
%\begin{align*}
%\gamma_{m_i,j}^{n_i}
%= 2\sum_{i=1}^n\tau_i^2\Psi_{m_i}^{n_i}(m_i-1)\doublehat{\sigma}_{i,j}^2/m_i
%&+ \log(6n/p)\sum_i\tau_i^2D_{i,j}^2\Omega_{m_i}^{n_i}\Psi_{m_i}^{n_i}  \\
%&+\log(3/p)\left(\max_i\tau_i^2{\Psi_{m_i}^{n_i}}^2D_{i,j}^2\right)
%\end{align*}

\end{theorem}




\section{ADDITIONAL SLIDES - if brought up by questions}




\section{Existing Solution Space}

There exist a range of relevent existing solutions which are able to allocate resources in a general context in the presence of monetary transactions.
Particularly these consider a possible span of outcomes usually in terms of utility, and an allocation in this context allocates an outcome and gives a transfer of utility (ie. money) between the participants.
These notable mechnaisms include:

\paragraph{The VCG mechanism}
The VCG mechanism is an allocation process where each player is payed utility equal to the impact that their presence has upon others (ie. their externality) in the decision process which selects an outcome that maximises the sum of utility. let us explain:

The VCG process is a bidding process of $n$ agents over set of outcomes $X$ where every agent $i$ has a valuation (or utility) $v_i$,
($ v_i~:~X\rightarrow \mathbb{R}_{\ge 0} $)\\
The process asks every agent for their valuations and instigates the outcome that maximises the sum of the reported valuations:
$ x^* = \argmax_{x\in X}\sum_{i=1}^{n}v_i(x) $\\
This outcome is implemented and the bidding process pays each agent $i$ the utility value $d_i$ (which may be positive or negative):
\begin{equation}\label{eq:VCG_payment_rule} d_i(v)=\sum_{j\ne i}v_j(x^*) - \max_{x'\in X}\sum_{j\ne i}v_j(x') \end{equation}
And this value $d_i$ is the value that the player's presence adds to the utility of others minus the sum of the other player's utility which would have been obtained in the player's absence - ie. the player's externality.


The most notable property is that the VCG mechanism is to be \textit{truthful} or \textit{incentive compatible}, in that no single player can possibly gain by misreporting their valuations in the event that the utility of the agents is \textit{quasilinear}.\cite{roberts1979characterization, Lavi2008} 
ie. if each player's utility $u_i$ has form:
$ u_i = d_i(v)+v_i $

VCG is also \textit{individual rationality}, in that no agent (assuming quasilinear utility) will ever be left with a net negative utility.
However, one primary drawback of this mechanism is that it is not \textit{budget balanced}, in that it is possible for the amount of utility that is transferred between the players might not sum to zero.


\paragraph{The Shapley Value}

The \textit{Shapley value} is a well known solution concept in cooperative game theory, which allocates to each individual player the average marginal contribution they would add under uncertainty of the presence of other players.

The basic elements of a classic cooperative game are that there is a set of players$N=\{1,2,\dots n\}$ and a function $v: S\subseteq N \rightarrow \mathbb{R}$ with $v(\emptyset)=0$ called the \textit{characteristic function}.
The characteristic function identifies in some sense the `worth' or `value' of any group of players (a `coalition'), and one aim of cooperative game theory is to develop solution concepts which split the wealth achieved if everybody cooperated (that is $v(N)$) between all the players.

Particularly, for any coalition $S$ which does not include a player $i$, then player $i$'s marginal contribution is $v(S\cup\{i\}) - v(S)$. If we average such contributions for coalitions of size $k$:
\begin{equation}\label{shapley_value1}
\hat{v}_{i,k} = \frac{1}{\binom{n-1}{k}}\sum_{S\subseteq N\setminus \{ i\} , |S|=k} %\frac{(n-|S|-1)!\,|S|!}{(n-1)!}
(v(S\cup\{i\})-v(S))
\end{equation}
Then we have the average marginal contribution of player $i$ to coalitions of size $k$, and if we average this over coalitions of different size, we get the Shapley value:
\begin{equation}\label{shapley_value2} \varphi_i(\langle N,v\rangle) = \frac{1}{n}\sum_{k=0}^{n-1}\hat{v}_{i,k} \end{equation}

The Shapley value for a player can also be formulated as being the expected marginal contribution across all join ordering processes.
So for instance, if we let $\pi(N)$ denote the set of all ordered permutations of the player set $N$ and if we denote $Pre^i(O)$ as the set of predecessors of player $i$'s addition in that ordering $O\in \pi(N)$. Then the Shapley value can be expressed as the average marginal contribution across orderings, see \cite{weber_1988}:
\begin{equation}\label{shapley_value3}
    \varphi_i(\langle N,v\rangle) = \frac{1}{n!}\sum_{O\in\pi(N)}v(Pre^i(O)\cup\{i\})-v(Pre^i(O))
\end{equation}

The shapley value satisfies a range different sets of attractive axioms, such as:
\begin{itemize}
\item	\textbf{Efficiency}: That the total dividend is broken up, $\sum_i\varphi(\langle N,v\rangle)_i = v(N)$
\item	\textbf{Symmetry}: If two players $i$ and $j$ are substitutes and contribute the same to all coalitions, such that if $v(S\cup i)=v(S\cup j)~~\forall S\subseteq N\setminus\{i,j\}$, then $\varphi(\langle N,v\rangle)_i = \varphi(\langle N,v\rangle)_j$
\item	\textbf{Dummy Player}: A player $i$ is a dummy player if the amount that $i$ contributes to any coalition is the amount that $i$ is able to achieve alone (i.e.\ $v(S\cup \{i\})-v(S)=v(\{i\})~~\forall S\subseteq N\setminus\{i\}$) then $\varphi(\langle N,v\rangle)_i=v(\{i\})$
\item	\textbf{Additivity}: That for any two games, the imputation for the two together is the sum of the imputations in each, for any $v_1$ and $v_2$, $\varphi(\langle N,v_1+v_2\rangle)=\varphi(\langle N,v_1 \rangle) + \varphi(\langle N,v_2\rangle)$
\end{itemize}

\paragraph{Locational Marginal Pricing}

Locational Marginal Pricing approach extends from microeconomic theory and thought.
Particularly the utilitarian perspective sought to explain market dynamics in terms of people's efforts to maximise their own utility (or more practically, profit), and in this context stable (and hence normal) market prices were associated with the equilibrium of those efforts.
And this perspective yielded a link between market dynamics with the concept of the margin - or `marginalism'.
Ultimately marginalism was adopted mainstream in the so-called 'marginal revolution', which has been identified (such as by \cite{marginalism1}) as defining the beginning of neoclassical economics.

The marginalist revolution saw that economic prices were not just equal to the summation of normal production costs (ultimately depending on the value of labor), but instead depended on the cost of production of the most marginal unit produced to meet demand.

The idea of marginalism is best illustrated with a graph that might well appear in economic texts, in Figure \ref{fig_demand_supply} there is an illustration of a hypothetical market for a particular economic good, with many suppliers and many buyers.
In the figure we have the plotted the `Supply curve', identifying how many units of the good could be sustainably supplied to the market if the units sold for a particular price.
And we also have the `Demand curve', identifying how many units of the good would natrually be sold depending on the price which the goods sold at.
In this way, if the market is functioning ideally, then there is only one sensible outcome: that the goods should be sold in the number (and therefore at the price), that is at the intersection of the supply and demand curves - ie. the marginal price point.

One of the most notable features of this neoclassical analysis is that the equilibrium marginal price point also maximises the sum of utility of those that participate in the market.
This can be seen from Figure \ref{fig_demand_supply} where all the buyers who value the goods the most are provided from all the sellers who can supply those goods at lowest cost up until the marginal point where no further trade is viable.

This point of utility maximisation is seen in Neoclassical analysis more generally, where market equilibrium prices (at and/or between markets) occur at the point of the maximisation of the sum of utility. Indeed, the process of mathematically deriving these marginal prices developed into a kind of calculus, where the marginal prices fall out as Lagrange multipliers in the process of maximising the sum of utility - these are Locational Marginal Prices.


\begin{figure}[]{}
    \centering
	\begin{tikzpicture}
	\begin{axis}[
		title={Demand \& Supply curves, of a hypothetical market},
		xlabel={Quantity of goods},
		ylabel={\$ per good},
		xmin=0, xmax=60,
		ymin=0, ymax=40,
		%xtick={0,0.05,0.1,0.15,0.2,0.25},
		%ytick={30,35,40},
		yticklabel=$\$\pgfmathprintnumber{\tick}$,
		%ymajorgrids=true,
		grid style=dashed,
		xticklabel style={/pgf/number format/fixed},
	]
	\addplot[red] coordinates {
(0,0.0)(1,0.0)(1,0.012500000000000002)(2,0.012500000000000002)(2,0.05000000000000001)(3,0.05000000000000001)(3,0.11249999999999999)(4,0.11249999999999999)(4,0.20000000000000004)(5,0.20000000000000004)(5,0.3125)(6,0.3125)(6,0.44999999999999996)(7,0.44999999999999996)(7,0.6124999999999999)(8,0.6124999999999999)(8,0.8000000000000002)(9,0.8000000000000002)(9,1.0125000000000002)(10,1.0125000000000002)(10,1.25)(11,1.25)(11,1.5125000000000002)(12,1.5125000000000002)(12,1.7999999999999998)(13,1.7999999999999998)(13,2.1125000000000003)(14,2.1125000000000003)(14,2.4499999999999997)(15,2.4499999999999997)(15,2.8125)(16,2.8125)(16,3.2000000000000006)(17,3.2000000000000006)(17,3.6125)(18,3.6125)(18,4.050000000000001)(19,4.050000000000001)(19,4.5125)(20,4.5125)(20,5.0)(21,5.0)(21,5.5125)(22,5.5125)(22,6.050000000000001)(23,6.050000000000001)(23,6.612499999999999)(24,6.612499999999999)(24,7.199999999999999)(25,7.199999999999999)(25,7.8125)(26,7.8125)(26,8.450000000000001)(27,8.450000000000001)(27,9.1125)(28,9.1125)(28,9.799999999999999)(29,9.799999999999999)(29,10.5125)(30,10.5125)(30,11.25)(31,11.25)(31,12.012500000000001)(32,12.012500000000001)(32,12.800000000000002)(33,12.800000000000002)(33,13.612499999999999)(34,13.612499999999999)(34,14.45)(35,14.45)(35,15.3125)(36,15.3125)(36,16.200000000000003)(37,16.200000000000003)(37,17.1125)(38,17.1125)(38,18.05)(39,18.05)(39,19.0125)(40,19.0125)(40,20.0)(41,20.0)(41,21.0125)(42,21.0125)(42,22.05)(43,22.05)(43,23.112499999999997)(44,23.112499999999997)(44,24.200000000000003)(45,24.200000000000003)(45,25.3125)(46,25.3125)(46,26.449999999999996)(47,26.449999999999996)(47,27.612500000000004)(48,27.612500000000004)(48,28.799999999999997)(49,28.799999999999997)(49,30.012500000000006)(50,30.012500000000006)(50,31.25)(51,31.25)(51,32.512499999999996)(52,32.512499999999996)(52,33.800000000000004)(53,33.800000000000004)(53,35.1125)(54,35.1125)(54,36.45)(55,36.45)(55,37.8125)(56,37.8125)(56,39.199999999999996)(57,39.199999999999996)(57,40.612500000000004)(58,40.612500000000004)(58,42.05)(59,42.05)(59,43.5125)(60,43.5125)(60,45.0)(61,45.0)(61,46.51249999999999)(62,46.51249999999999)(62,48.050000000000004)(63,48.050000000000004)(63,49.6125)(64,49.6125)(64,51.20000000000001)(65,51.20000000000001)(65,52.8125)(66,52.8125)(66,54.449999999999996)(67,54.449999999999996)(67,56.1125)(68,56.1125)(68,57.8)(69,57.8)(69,59.51250000000001)(70,59.51250000000001)
		}node[pos=0.6](endofplotsquare){} ;
	\node [above, rotate=55] at (endofplotsquare) {\footnotesize Supply Curve};
	
	\addplot[blue] coordinates {
(0,40.0)(1,40.0)(1,39.97501561524047)(2,39.97501561524047)(2,39.900249376558605)(3,39.900249376558605)(3,39.77625854568055)(4,39.77625854568055)(4,39.603960396039604)(5,39.603960396039604)(5,39.38461538461539)(6,39.38461538461539)(6,39.119804400978)(7,39.119804400978)(7,38.8114008489994)(8,38.8114008489994)(8,38.46153846153846)(9,38.46153846153846)(9,38.0725758477097)(10,38.0725758477097)(10,37.64705882352941)(11,37.64705882352941)(11,37.187681580476465)(12,37.187681580476465)(12,36.69724770642202)(13,36.69724770642202)(13,36.178631995477666)(14,36.178631995477666)(14,35.634743875278396)(15,35.634743875278396)(15,35.06849315068493)(16,35.06849315068493)(16,34.48275862068965)(17,34.48275862068965)(17,33.88035997882477)(18,33.88035997882477)(18,33.26403326403326)(19,33.26403326403326)(19,32.63640999490056)(20,32.63640999490056)(20,32.0)(21,32.0)(21,31.35717785399314)(22,31.35717785399314)(22,30.71017274472169)(23,30.71017274472169)(23,30.061061531235325)(24,30.061061531235325)(24,29.411764705882355)(25,29.411764705882355)(25,28.764044943820224)(26,28.764044943820224)(26,28.1195079086116)(27,28.1195079086116)(27,27.479604980678403)(28,27.479604980678403)(28,26.845637583892618)(29,26.845637583892618)(29,26.218762802130275)(30,26.218762802130275)(30,25.6)(31,25.6)(31,24.990238188207734)(32,24.990238188207734)(32,24.39024390243902)(33,24.39024390243902)(33,23.800669393826702)(34,23.800669393826702)(34,23.222060957910017)(35,23.222060957910017)(35,22.654867256637168)(36,22.654867256637168)(36,22.099447513812155)(37,22.099447513812155)(37,21.55607948804311)(38,21.55607948804311)(38,21.02496714848883)(39,21.02496714848883)(39,20.50624799743672)(40,20.50624799743672)(40,20.0)(41,20.0)(41,19.506248095092957)(42,19.506248095092957)(42,19.024970273483948)(43,19.024970273483948)(43,18.556103218324154)(44,18.556103218324154)(44,18.099547511312217)(45,18.099547511312217)(45,17.655172413793103)(46,17.655172413793103)(46,17.22282023681378)(47,17.22282023681378)(47,16.802310317668677)(48,16.802310317668677)(48,16.39344262295082)(49,16.39344262295082)(49,15.996000999750061)(50,15.996000999750061)(50,15.609756097560975)(51,15.609756097560975)(51,15.234467983813378)(52,15.234467983813378)(52,14.86988847583643)(53,14.86988847583643)(53,14.51576321161261)(54,14.51576321161261)(54,14.171833480956598)(55,14.171833480956598)(55,13.837837837837839)(56,13.837837837837839)(56,13.513513513513514)(57,13.513513513513514)(57,13.198597648999794)(58,13.198597648999794)(58,12.892828364222401)(59,12.892828364222401)(59,12.595945679984254)(60,12.595945679984254)(60,12.307692307692308)(61,12.307692307692308)(61,12.027814320616427)(62,12.027814320616427)(62,11.756061719324025)(63,11.756061719324025)(63,11.49218890285509)(64,11.49218890285509)(64,11.235955056179774)(65,11.235955056179774)(65,10.987124463519313)(66,10.987124463519313)(66,10.745466756212224)(67,10.745466756212224)(67,10.510757102972573)(68,10.510757102972573)(68,10.282776349614396)(69,10.282776349614396)(69,10.06131111460462)(70,10.06131111460462)
		}node[pos=0.35](endofplotsquare){} ;
	\node [above, rotate=-38] at (endofplotsquare) {\footnotesize Demand Curve};


\addplot[dashed] coordinates {
(0,20.0)(40,20.0)
		}node[pos=0.4](endofplotsquare){} ;
	\node [above] at (endofplotsquare) {\footnotesize Marginal Price point};
	\end{axis}
	\end{tikzpicture}
	\vspace{-10pt}
	\caption{The Demand and Supply curves of a hypothetical market.}
	
	\label{fig_demand_supply}
\end{figure}


\paragraph{Bargaining Solution Concepts}

Another class of solutions are the Bargianing solution concepts, notably including the work of John Nash.

Nash bargaining was introduced by John Nash \cite{nash1} as an axiomatic approach to predict the normal result of idealised bargaining over potential outcomes.
It is defined over a set of potential outcomes $F$ % (which might coincide with power-flows and fiscal payments on an electricity network etc.) 
where each of the players $P=\{p_1,p_2,\dots\}$ value the outcomes differently with utilities $u_{p\in P}(f)$ for $f\in F$.
Additionally there is a privileged outcome called the `disagreement' outcome $d$ which represents the event of the negotiation between the players breaking down, and which any player can unilaterally implement.

Nash identified that in this case there is a unique solution satisfying some very intuitive axioms:
\begin{itemize}
\item \textit{Invariant to affine transformations}: that the solution should not change if the utilities of any of the players are scaled (by some positive factor) or offset, ie that they are invariant under the set of affine transformations% that might also represent their relative preferences.
\item \textit{Pareto optimality}: That the solution will not be inferior to any other point in the preferences of all players.
\item \textit{Independence of irrelevant alternatives} (IIA): If any subset of potential outcomes does not feature the solution point or the disagreement point, then it could be removed from consideration without affecting the solution.
\item \textit{Symmetry}: The solution is invariant with regards to the ordering of the players.
\end{itemize}
Nash identified that this solution maximises the product of utilities above the utility of the disagreement point:%\cite{book1}
\begin{equation}\label{nash-product}\text{nash}(F,d) = \argmax_{(f\ge d)\in F}\prod_{p\in P}(u_p(f)-u_p(d))\end{equation}

a singular disagreement outcome may not be very clearly given by the context to begin with.
And so for a Nash bargaining solution concept to be applied, a disagreement outcome must be chosen from the set of possible outcomes, which leads to the question of how this should be done.
In another paper, Nash explicitly addresses the consideration of the agents choosing a disagreement point between themselves in a prior stage in the bargaining process.

Particularly he considers a game specifically between two players, who reach a cooperative outcome in a series of stages of negotiations.
He considers that each of the players has a space of mixed strategies $S_i$ in a normal form game, and for each possible pair of mixed strategies that the players might execute, each receives an immediate payoff $p_1(s_1,s_2)$ and $p_2(s_1,s_2)$ respectively ($s_1\in S_1$, $s_2\in S_2$).
He also considers that there is a set $B$ of possible payoffs for the players if they cooperate, which may be bigger than the set of payoffs in the normal form game.\\
$\text{ie.}\quad \forall s_1\in S_1,s_2\in S_2 \quad (p_1(s_1,s_2), p_2(s_1,s_2)) \in B$

Nash then considers a specific negotiation process:
\begin{enumerate}
\item Each player $i$ chooses a mixed strategy $t_i\in S_i$ that will be used if the two cannot come to an agreement - this is the threat.
\item The players inform each other of their threats.
\item Each player $i$ decides upon a `demand' $d_i$ which is an amount of utility which they will not accept less than, without triggering the chosen threat.
\item If there is a point $(u_1,u_2)$ in B such that $u_1 \ge d_1$, and $u_2 \ge d_2$ (ie. if there is a possible way the demands can be mutually satisifed), then the pay-off to each player $i$ is $d_i$. Otherwise, the pay-off to each player $i$ is given by the result of their threats, $p_i(t_l, t_2)$.
\end{enumerate}

Nash identifies that a natural choice of compatible demands in the second part of the game occurs at the maximising of the Nash product (Equation \ref{nash-product}) above a disagreement point determined by the execution of threat strategies (as elucidated in the previous section \ref{sec:nash_bargaining_exogenous})
Nash then identifies that in light of this result for the second part of the game there exists a unique set of optimal choice of threats $t_i$ for the two players in the first part of the game; which is a Nash equilibrium of them with respect to the subsequent maximisation of the Nash product.


%----------------------------------------------------------------------------------------
%	BIBLIOGRAPHY
%----------------------------------------------------------------------------------------

\renewcommand{\refname}{\spacedlowsmallcaps{References}} % For modifying the bibliography heading

\bibliographystyle{unsrt}

\bibliography{sample.bib} % The file containing the bibliography

%----------------------------------------------------------------------------------------

\end{document}
